<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Alberto Lem ¬∑ 2026</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

  <!-- Open Graph / WhatsApp / Twitter -->
  <meta property="og:title" content="Alberto Lem ¬∑ 2026" />
  <meta property="og:description" content="Mensaje 2026." />
  <meta property="og:url" content="https://alberto-lem.github.io/visits/" />
  <meta property="og:image" content="https://alberto-lem.github.io/visits/cover.png" />
  <meta name="twitter:card" content="summary_large_image" />

  <style>
    :root{
      /* Futurista: azul profundo + cian ne√≥n + magenta suave */
      --bg0:#030A12;
      --bg1:#041c2d;
      --bg2:#0b4f7a;

      --glass: rgba(255,255,255,.10);
      --glass2: rgba(10, 18, 28, .35);
      --stroke: rgba(255,255,255,.18);

      --txt: rgba(255,255,255,.96);
      --sub: rgba(255,255,255,.84);
      --muted: rgba(255,255,255,.70);

      --neonA: rgba(44,198,255,.52);
      --neonB: rgba(255,108,201,.28);
      --neonC: rgba(145,255,190,.16);

      --shadow: 0 22px 70px rgba(0,0,0,.52);
      --radius: 28px;

      --linkedin:#0A66C2;

      /* Tama√±os adaptables */
      --pad: clamp(16px, 3.2vw, 28px);
      --gap: clamp(10px, 2.4vw, 16px);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--txt);
      background: var(--bg0);
      overflow:hidden;
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
    }

    /* Fondo futurista con movimiento sutil */
    .bg{
      position:fixed; inset:-60px;
      background:
        radial-gradient(900px 520px at 18% 18%, var(--neonA), transparent 70%),
        radial-gradient(820px 540px at 86% 22%, var(--neonB), transparent 70%),
        radial-gradient(1100px 680px at 50% 95%, var(--neonC), transparent 70%),
        linear-gradient(180deg, var(--bg2) 0%, var(--bg1) 55%, var(--bg0) 100%);
      animation:bgMove 10s ease-in-out infinite alternate;
      filter:saturate(118%) contrast(104%);
    }
    @keyframes bgMove{ to{ transform:translate(-14px,8px) scale(1.02); } }

    /* Capa de grilla futurista (muy sutil) */
    .gridOverlay{
      position:fixed; inset:0;
      background:
        linear-gradient(to right, rgba(255,255,255,.06) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(255,255,255,.06) 1px, transparent 1px);
      background-size: 64px 64px;
      opacity:.06;
      pointer-events:none;
      mask-image: radial-gradient(circle at 50% 30%, black 0%, transparent 68%);
    }

    /* Part√≠culas (estrellas/nieve) */
    #fxCanvas{
      position:fixed; inset:0;
      width:100vw; height:100vh;
      z-index:0; pointer-events:none;
      opacity:.95;
    }

    .wrap{
      position:relative; z-index:1;
      min-height:100vh;
      display:grid;
      place-items:center;
      padding: var(--pad);
      padding-top: calc(var(--pad) + env(safe-area-inset-top));
      padding-bottom: calc(var(--pad) + env(safe-area-inset-bottom));
    }

    /* Contenedor responsivo: en m√≥vil m√°s compacto, en desktop m√°s amplio */
    .card{
      width: min(980px, 100%);
      padding: clamp(18px, 3.8vw, 44px);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.11), rgba(255,255,255,.07));
      border: 1px solid var(--stroke);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      box-shadow: var(--shadow);
      text-align:center;
      position:relative;
      overflow:hidden;
      animation: enter .7s cubic-bezier(.2,.8,.2,1) both;
    }
    @keyframes enter{
      from{opacity:0; transform:translateY(14px) scale(.985)}
      to{opacity:1; transform:translateY(0) scale(1)}
    }

    /* Halo + borde ne√≥n */
    .card::before{
      content:"";
      position:absolute; inset:0;
      border-radius:var(--radius);
      pointer-events:none;
      box-shadow:
        inset 0 0 0 1px rgba(255,255,255,.14),
        0 0 44px rgba(44,198,255,.12),
        0 0 70px rgba(255,108,201,.08);
      opacity:.95;
      z-index:0;
    }

    /* Brillo diagonal */
    .sheen{
      position:absolute;
      inset:-55%;
      background: linear-gradient(120deg,
        transparent 36%,
        rgba(255,255,255,.10) 46%,
        rgba(255,255,255,.18) 50%,
        rgba(255,255,255,.10) 54%,
        transparent 64%
      );
      transform: translateX(-45%) rotate(10deg);
      animation: sheenMove 7.8s ease-in-out infinite;
      pointer-events:none;
      opacity:.55;
      z-index:1;
    }
    @keyframes sheenMove{
      0%   { transform: translateX(-60%) rotate(10deg); opacity:.10; }
      35%  { opacity:.55; }
      65%  { opacity:.55; }
      100% { transform: translateX(60%) rotate(10deg); opacity:.10; }
    }

    .card > *{ position:relative; z-index:2; }

    /* Top badges: en m√≥vil se apilan bien */
    .toprow{
      display:flex;
      justify-content:center;
      gap: var(--gap);
      flex-wrap:wrap;
      margin-bottom: 14px;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius:999px;
      background: rgba(0,0,0,.20);
      border: 1px solid rgba(255,255,255,.14);
      color: var(--muted);
      font-size: 13px;
      user-select:none;
      max-width: 100%;
    }
    .badge b{ color: var(--txt); }

    .dot{
      width:10px; height:10px; border-radius:999px;
      background: rgba(44,198,255,.95);
      animation: pulse 1.6s ease-out infinite;
      box-shadow: 0 0 0 rgba(44,198,255,.35);
      flex: 0 0 auto;
    }
    @keyframes pulse{
      0%   { box-shadow: 0 0 0 0 rgba(44,198,255,.35); }
      70%  { box-shadow: 0 0 0 10px rgba(44,198,255,0); }
      100% { box-shadow: 0 0 0 0 rgba(44,198,255,0); }
    }

    /* Encabezado */
    .name{
      font-size: clamp(22px, 4.2vw, 34px);
      font-weight: 950;
      margin: 8px 0 6px;
      letter-spacing:.2px;
      text-shadow: 0 10px 26px rgba(0,0,0,.35);
    }
    .year{
      font-size: 12px;
      letter-spacing: 3.2px;
      opacity:.90;
      margin-bottom: 18px;
      text-transform: uppercase;
    }

    h1{
      font-size: clamp(26px, 5.5vw, 52px);
      margin: 8px 0 12px;
      font-weight: 980;
      line-height: 1.06;
    }

    p{
      max-width: 72ch;
      margin: 0 auto 16px;
      font-size: clamp(15px, 2.35vw, 18px);
      line-height: 1.70;
      color: var(--sub);
    }

    /* Mensaje din√°mico (tipo ‚Äúpantalla‚Äù moderna) */
    .dynamicWrap{
      margin: 18px auto 0;
      max-width: 74ch;
      background: rgba(0,0,0,.16);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 20px;
      padding: 14px 14px;
      box-shadow: 0 12px 30px rgba(0,0,0,.20);
    }
    .dynamic{
      font-size: clamp(16px, 2.8vw, 20px);
      font-weight: 950;
      letter-spacing:.15px;
      min-height: 2.8em;
      text-shadow: 0 10px 26px rgba(0,0,0,.25);
      margin:0;
    }
    .hint{
      margin-top: 10px;
      font-size: 12.5px;
      color: var(--muted);
      opacity:.95;
    }

    /* Acciones: en m√≥vil pasan a 1 columna si no cabe */
    .actions{
      margin-top: 22px;
      display:grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 12px;
      align-items:stretch;
    }

    .btn{
      display:inline-flex;
      justify-content:center;
      align-items:center;
      gap: 10px;
      padding: 14px 14px;
      border-radius: 18px;
      font-weight: 950;
      text-decoration:none;
      cursor:pointer;
      border: 1px solid rgba(255,255,255,.20);
      background: rgba(0,0,0,.18);
      color: var(--txt);
      transition: transform .15s ease, opacity .15s ease, box-shadow .15s ease, filter .15s ease;
      min-height: 48px; /* t√°ctil */
      -webkit-tap-highlight-color: transparent;
    }
    .btn:hover{
      transform: translateY(-2px);
      opacity: .98;
      filter: saturate(120%);
      box-shadow: 0 16px 34px rgba(0,0,0,.28);
    }
    .btn:active{ transform: translateY(0); }

    .btn-linkedin{
      background: linear-gradient(180deg, rgba(10,102,194,1), rgba(10,102,194,.88));
      color:#fff;
      border-color: rgba(255,255,255,.16);
    }

    .btn-animate{ position:relative; overflow:hidden; }
    .btn-animate::after{
      content:"";
      position:absolute;
      inset:-40% -30%;
      background: linear-gradient(120deg, transparent, rgba(255,255,255,.24), transparent);
      transform: translateX(-60%) rotate(12deg);
      transition: transform .6s ease;
      opacity:.65;
    }
    .btn-animate:hover::after{ transform: translateX(60%) rotate(12deg); }

    .footer{
      margin-top: 18px;
      font-size: 13px;
      color: var(--muted);
      opacity:.92;
    }

    /* Banner audio: m√°s limpio y m√≥vil-friendly */
    .audioBanner{
      position:fixed;
      left:12px; right:12px; bottom:12px;
      z-index:5;
      display:none;
      gap: 10px;
      padding: 12px 12px;
      border-radius: 18px;
      background: rgba(0,0,0,.50);
      border: 1px solid rgba(255,255,255,.18);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow: 0 18px 60px rgba(0,0,0,.35);
      color: var(--txt);
      align-items:center;
    }
    .audioBanner .mini{
      font-size: 13px;
      color: var(--sub);
      opacity:.92;
      flex: 1 1 auto;
      text-align:left;
    }
    .audioBanner .rowBtns{
      display:flex;
      gap:10px;
      flex: 0 0 auto;
    }
    .audioBanner .btn{ min-height: 42px; padding: 10px 12px; border-radius: 14px; }

    /* Ajustes fuertes para smartphones */
    @media (max-width: 720px){
      body{ overflow:auto; } /* permite scroll si el teclado aparece */
      .wrap{ min-height: 100svh; } /* mejor en m√≥viles modernos */
      .card{ padding: clamp(16px, 4.2vw, 26px); }
      .actions{
        grid-template-columns: 1fr;
      }
      .badge{ font-size: 12.5px; padding: 9px 11px; }
      .audioBanner{
        flex-direction: column;
        align-items: stretch;
      }
      .audioBanner .mini{ text-align:center; }
      .audioBanner .rowBtns{ justify-content:center; width:100%; }
      .audioBanner .rowBtns .btn{ width: 100%; }
    }

    @media (prefers-reduced-motion: reduce){
      .bg,.sheen,.dot{ animation:none !important; }
      #fxCanvas{ display:none; }
      .btn{ transition:none !important; }
    }
  </style>
</head>

<body>
  <div class="bg"></div>
  <div class="gridOverlay" aria-hidden="true"></div>
  <canvas id="fxCanvas" aria-hidden="true"></canvas>

  <!-- Audio local -->
  <audio id="bgMusic" preload="auto" loop>
    <source src="./futuristic-beat-146661.mp3" type="audio/mpeg" />
  </audio>

  <div class="audioBanner" id="audioBanner" role="dialog" aria-live="polite">
    <div class="mini">üîä El navegador bloque√≥ el audio autom√°tico. Presione para activarlo.</div>
    <div class="rowBtns">
      <button class="btn btn-animate" id="btnEnableAudio" type="button">Activar audio</button>
      <button class="btn btn-animate" id="btnDismissAudio" type="button">Cerrar</button>
    </div>
  </div>

  <main class="wrap">
    <section class="card" id="card">
      <div class="sheen"></div>

      <div class="toprow">
        <div class="badge">
          <span class="dot"></span>
          <span>En vivo</span>
        </div>
        <div class="badge">üëÅÔ∏è Visitas: <b><span id="visitCount">‚Äî</span></b></div>
        <div class="badge" id="audioState">üîá M√∫sica: OFF</div>
      </div>

      <div class="name">Alberto Lem</div>
      <div class="year">Mensaje ¬∑ 2026</div>

      <h1>‚ú® Le desea</h1>

      <p>
        Que este nuevo ciclo est√© lleno de salud, claridad, motivaci√≥n y oportunidades.
        Reciba este mensaje con aprecio y comp√°rtalo con quien considere que pueda necesitar
        una palabra positiva en este a√±o 2026.
      </p>

      <div class="dynamicWrap" aria-live="polite">
        <p class="dynamic" id="dynamicMsg"></p>
        <div class="hint">Toque ‚ÄúNuevo mensaje‚Äù para actualizar el saludo.</div>
      </div>

      <div class="actions">
        <a class="btn btn-linkedin btn-animate"
           href="https://www.linkedin.com/in/alberto-lem?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=ios_app"
           target="_blank" rel="noopener">
          üíº LinkedIn
        </a>

        <button class="btn btn-animate" id="btnRefresh" type="button">
          ‚ú® Nuevo mensaje
        </button>

        <button class="btn btn-animate" id="btnMusic" type="button">
          üîä M√∫sica: AUTO
        </button>
      </div>

      <div class="footer">Mensaje personal compartido p√∫blicamente ¬∑ A√±o 2026</div>
    </section>
  </main>

  <script>
    /* =========================
       CONFIG API (contador)
       ========================= */
    const API_BASE = "https://api.systemblacklem.com";
    const PAGE_KEY = "visits";
    const ENDPOINT_TRACK = `${API_BASE}/api/public/visits/track?page=${encodeURIComponent(PAGE_KEY)}`;

    /* =========================
       Mensajes
       ========================= */
    const MESSAGES = [
      "Que cada paso que d√© hoy le acerque, con calma y confianza, a aquello que desea construir.",
      "Que este a√±o le regale serenidad para pensar con claridad y fuerza para seguir adelante.",
      "Que 2026 le encuentre con esperanza, y le despida con satisfacci√≥n por lo logrado.",
      "Que la paz acompa√±e sus decisiones y la determinaci√≥n sostenga sus sue√±os.",
      "Que cada decisi√≥n tomada con honestidad fortalezca su camino.",
      "Que este nuevo ciclo le brinde equilibrio, prop√≥sito y momentos de verdadera tranquilidad.",
      "Que la claridad gu√≠e sus pensamientos y la constancia respalde sus acciones.",
      "Que cada amanecer le recuerde que siempre es posible mejorar.",
      "Que el esfuerzo silencioso de hoy se convierta en la recompensa de ma√±ana.",
      "Que la perseverancia le ayude a alcanzar resultados firmes y duraderos.",
      "Que 2026 le reciba con orden interior, visi√≥n clara y fortaleza emocional.",
      "Que la serenidad le permita elegir con sabidur√≠a, incluso en momentos dif√≠ciles.",
      "Que el compromiso diario consigo mismo d√© frutos reales.",
      "Que cada reto le deje una lecci√≥n valiosa y una nueva perspectiva.",
      "Que la disciplina sea un apoyo, no una carga.",
      "Que el enfoque le ayude a avanzar sin perder lo verdaderamente importante.",
      "Que la constancia marque, paso a paso, la diferencia en su vida.",
      "Que el progreso llegue sin prisa, pero con firmeza.",
      "Que la paciencia fortalezca cada proceso que hoy inicia.",
      "Que el equilibrio le acompa√±e en cada etapa de su camino."
    ];

    function pick(arr){ return arr[Math.floor(Math.random() * arr.length)]; }

    const dynamicEl = document.getElementById("dynamicMsg");
    function newMessage(){
      dynamicEl.textContent = pick(MESSAGES);
    }

    const btnRefresh = document.getElementById("btnRefresh");
    btnRefresh.addEventListener("click", () => {
      newMessage();
      // micro vibraci√≥n en m√≥viles (si est√° disponible)
      if (navigator.vibrate) navigator.vibrate(18);
    });

    newMessage();

    /* =========================
       FX Canvas (estrellas/nieve)
       - Adaptativo a rendimiento y tama√±o
       ========================= */
    const canvas = document.getElementById("fxCanvas");
    const ctx = canvas.getContext("2d", { alpha:true });

    let dots = [];
    let raf = null;

    function getDpr(){ return Math.min(2, window.devicePixelRatio || 1); }

    function resize(){
      const dpr = getDpr();
      canvas.width  = Math.floor(window.innerWidth  * dpr);
      canvas.height = Math.floor(window.innerHeight * dpr);
      ctx.setTransform(1,0,0,1,0,0);
      ctx.scale(dpr, dpr);
    }

    function density(){
      // menos part√≠culas en m√≥vil / pantallas peque√±as
      const w = window.innerWidth;
      const base = Math.floor(w / 10); // escalable
      return Math.max(70, Math.min(160, base));
    }

    function initDots(){
      const n = density();
      dots = Array.from({ length:n }, () => ({
        x: Math.random() * window.innerWidth,
        y: Math.random() * window.innerHeight,
        r: 0.7 + Math.random() * 1.9,
        vy: 0.45 + Math.random() * 1.55,
        vx: -0.18 + Math.random() * 0.36,
        wob: Math.random() * Math.PI * 2,
        woSpeed: 0.004 + Math.random() * 0.010,
        a: 0.18 + Math.random() * 0.55
      }));
    }

    function draw(){
      ctx.clearRect(0,0, window.innerWidth, window.innerHeight);
      for (const d of dots){
        d.wob += d.woSpeed;
        d.x += d.vx + Math.sin(d.wob) * 0.28;
        d.y += d.vy;

        if (d.y > window.innerHeight + 10) { d.y = -10; d.x = Math.random() * window.innerWidth; }
        if (d.x < -10) d.x = window.innerWidth + 10;
        if (d.x > window.innerWidth + 10) d.x = -10;

        ctx.beginPath();
        ctx.fillStyle = `rgba(255,255,255,${d.a})`;
        ctx.arc(d.x, d.y, d.r, 0, Math.PI * 2);
        ctx.fill();
      }
      raf = requestAnimationFrame(draw);
    }

    window.addEventListener("resize", () => { resize(); initDots(); });
    document.addEventListener("visibilitychange", () => {
      if (document.hidden && raf){ cancelAnimationFrame(raf); raf=null; }
      if (!document.hidden && !raf){ draw(); }
    });

    resize();
    initDots();
    draw();

    /* =========================
       M√∫sica: autoplay + fallback
       ========================= */
    const audio = document.getElementById("bgMusic");
    const btnMusic = document.getElementById("btnMusic");
    const audioState = document.getElementById("audioState");
    const banner = document.getElementById("audioBanner");

    let musicState = "AUTO"; // AUTO | ON | OFF

    function updateAudioUI(){
      if (musicState === "ON") {
        btnMusic.textContent = "üîä M√∫sica: ON";
        audioState.textContent = "üîä M√∫sica: ON";
      } else if (musicState === "OFF") {
        btnMusic.textContent = "üîá M√∫sica: OFF";
        audioState.textContent = "üîá M√∫sica: OFF";
      } else {
        btnMusic.textContent = "üîä M√∫sica: AUTO";
        audioState.textContent = "üîä M√∫sica: AUTO";
      }
    }

    async function tryAutoplay(){
      audio.volume = 0.65;
      try{
        await audio.play();
        musicState = "ON";
        banner.style.display = "none";
      }catch{
        musicState = "AUTO";
        banner.style.display = "flex";
      }
      updateAudioUI();
    }

    function stopMusic(){
      audio.pause();
      audio.currentTime = 0;
      musicState = "OFF";
      banner.style.display = "none";
      updateAudioUI();
    }

    async function startMusicByUser(){
      try{
        await audio.play();
        musicState = "ON";
        banner.style.display = "flex";
        // si ya pudo reproducir, ocultar banner
        banner.style.display = "none";
      }catch{
        banner.style.display = "flex";
      }
      updateAudioUI();
    }

    btnMusic.addEventListener("click", () => {
      if (musicState === "ON") stopMusic();
      else startMusicByUser();
    });

    document.getElementById("btnEnableAudio").addEventListener("click", startMusicByUser);
    document.getElementById("btnDismissAudio").addEventListener("click", stopMusic);

    function userGestureKick(){
      if (musicState === "AUTO") startMusicByUser();
      window.removeEventListener("pointerdown", userGestureKick);
      window.removeEventListener("keydown", userGestureKick);
    }
    window.addEventListener("pointerdown", userGestureKick, { passive:true });
    window.addEventListener("keydown", userGestureKick);

    updateAudioUI();
    tryAutoplay();

    /* =========================
       Visitas (contador real)
       ========================= */
    async function track(){
      try{
        const res = await fetch(ENDPOINT_TRACK, { method:"GET", cache:"no-store" });
        const data = await res.json();
        document.getElementById("visitCount").textContent = String(data.total ?? "‚Äî");
      }catch{
        document.getElementById("visitCount").textContent = "‚Äî";
      }
    }

    track();
    setInterval(track, 30000);
  </script>
</body>
</html>

